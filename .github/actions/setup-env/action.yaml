name: Prepare environment

description: 'Sets up Node.js environment, installs dependencies, and installs Playwright browsers'

inputs:
    repo-token:
        description: 'Token to access the repo'
        required: true

runs:
    using: 'composite'
    steps:
        - uses: actions/setup-node@v6
          with:
              node-version: 24
              cache: 'npm'

        - name: Install Packages
          shell: bash
          run: |
              set -e
              npm ci
          env:
              CI: true

        - name: Install Playwright Browsers
          shell: bash
          run: |
              set -e
              npx playwright install --with-deps
          env:
              CI: true
